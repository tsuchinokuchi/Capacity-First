# Phase 5: タスク移動・延期の改善 設定手順

## 概要

Phase 5では、Buttonsプラグインを使ってスケジュールファイルに操作ボタンを追加し、タスクの移動や容量チェックを簡単に実行できるようにしました。

## 実装内容

### 1. 容量チェックスクリプト

- **ファイル**: `scripts/容量チェック.js`
- **コマンド名**: 「QuickAdd: 容量チェック」
- **機能**: 
  - 現在開いているスケジュールファイルの容量使用状況を表示
  - ジャンル別の容量構成比を表示
  - 残り容量を表示

### 2. スケジュールテンプレート

- **ファイル**: `スケジュールテンプレート.md`
- **内容**: 
  - 「次の日に移動」ボタン
  - 「容量チェック」ボタン
  - これらのボタンが新規作成時に自動で追加される

### 3. Buttonsボタン

#### 次の日に移動ボタン
```markdown
```button
name 次の日に移動
type command
action QuickAdd: タスク移動
```
```

#### 容量チェックボタン
```markdown
```button
name 容量チェック
type command
action QuickAdd: 容量チェック
```
```

## 使い方

### 1. 容量チェック

スケジュールファイルを開いて、以下のいずれかの方法で実行：

1. **ボタンから実行**: スケジュールファイル上部の「容量チェック」ボタンをクリック
2. **コマンドパレットから実行**: 「QuickAdd: 容量チェック」を選択

**表示内容**:
- 日付
- 容量使用状況（使用分 / 上限 / 使用率）
- 残り容量
- ジャンル別の容量構成比

### 2. タスクを次の日に移動

スケジュールファイルを開いて、以下のいずれかの方法で実行：

1. **ボタンから実行**: スケジュールファイル上部の「次の日に移動」ボタンをクリック
2. **コマンドパレットから実行**: 「QuickAdd: タスク移動」を選択

**動作**:
- 今日のタスク一覧から移動したいタスクを選択
- 次の出勤日に移動（容量チェック付き）
- 容量超過の場合は警告

## スケジュールファイルの構造

新規作成されるスケジュールファイルには、以下のボタンが自動で追加されます：

```markdown
## 今日のスケジュール

```button
name 次の日に移動
type command
action QuickAdd: タスク移動
```

```button
name 容量チェック
type command
action QuickAdd: 容量チェック
```

---
```

## 既存のスケジュールファイルにボタンを追加

既存のスケジュールファイルにもボタンを追加したい場合は、ファイルの先頭に以下を追加してください：

```markdown
```button
name 次の日に移動
type command
action QuickAdd: タスク移動
```

```button
name 容量チェック
type command
action QuickAdd: 容量チェック
```

---
```

## 注意事項

1. **Buttonsプラグイン**: Buttonsプラグインが有効になっている必要があります

2. **コマンド名**: ボタンは「QuickAdd: タスク移動」と「QuickAdd: 容量チェック」コマンドを実行します

3. **ファイル形式**: スケジュールファイルは「YYYY-MM-DD.md」形式である必要があります

## トラブルシューティング

### ボタンが表示されない

1. Buttonsプラグインが有効になっているか確認
2. ボタンのコードブロックが正しく記述されているか確認（```button で始まり ``` で終わる）

### ボタンをクリックしても動作しない

1. コマンドパレットから直接実行できるか確認
2. QuickAddプラグインが有効になっているか確認
3. コマンド名が正しいか確認（「QuickAdd: タスク移動」「QuickAdd: 容量チェック」）

### 容量チェックが動作しない

1. スケジュールファイル（YYYY-MM-DD形式）を開いているか確認
2. タスクが正しいフォーマット（`- [ ] タスク名 #ジャンル ⏱️ 時間`）で記述されているか確認

