# Phase 2: QuickAdd設定手順（更新版）

## 0. 共有プリセットで一括セットアップ

### ステップ1: QuickAddの有効化
1. Obsidianの `設定 → コミュニティプラグイン` で QuickAdd をインストール & 有効化
2. `設定 → QuickAdd` を開き、**Enable API** を ON にする
3. 設定画面を閉じる

### ステップ2: スクリプトフォルダの準備
1. ファイルエクスプローラーで、このVaultのフォルダを開く
2. `scripts/` フォルダが存在し、中に `.js` ファイルがあることを確認
   - 全てのスクリプトは `scripts/` フォルダに配置します（`.obsidian/scripts/` などの隠しフォルダは使用しません）。

### ステップ3: プリセットファイルの適用
1. **Obsidianを完全に終了**（重要：設定ファイルがロックされている可能性があるため）
2. `config/quickadd_preset.json` をコピー
3. `.obsidian/plugins/quickadd/` フォルダに移動
4. 既存の `data.json` をバックアップ（任意の場所に `data.json.backup` として保存）
5. コピーした `quickadd_preset.json` を `data.json` に**リネーム**して上書き

> [!WARNING] 既存の設定は消えます！
> 既にQuickAddで独自のコマンドやマクロを作成している場合、この操作を行うと**全ての設定が上書きされて消えてしまいます**。
> 既存の設定を残したい場合は、`data.json` を上書きせず、手動で必要なChoiceだけを追加するか、JSONを手動でマージしてください。

6. または、`quickadd_preset.json` の内容を `data.json` にコピー&ペースト

### ステップ4: 確認
1. Obsidianを起動
2. `Ctrl+P`（または `Cmd+P`）でコマンドパレットを開く
3. 「QuickAdd: タスク追加」と入力して検索
4. コマンドが表示されれば成功

> **注意**: 
> - プリセットは `.obsidian` フォルダをGitに入れずに共有するためのファイルです
> - 環境ごとに `data.json` を直接編集した場合は、再配布前に `config/quickadd_preset.json` を更新してください
> - コマンドが表示されない場合は、**Obsidianを完全に再起動**してください

## 1. プリセットに含まれるChoice一覧

| QuickAdd Choice | スクリプト | 主な呼び出し元 |
| --- | --- | --- |
| タスク追加 | `scripts/タスク追加.js` | ダッシュボード「➕ タスク追加」 |
| タスク移動 | `scripts/タスク移動.js` | ダッシュボード / 「次の日に移動」ボタン |
| タスクプールからスケジュールに移動 | `QuickAdd Macros/タスクプールからスケジュールに移動.js` | ダッシュボード「📦 タスクプール→予定」 |
| 繰り返しタスク展開 | `scripts/繰り返しタスク展開.js` | ダッシュボード「🔁 繰り返し展開」 |
| 容量チェック | `scripts/容量チェック.js` | スケジュールテンプレ内の「容量チェック」ボタン |
| タスク完了 / タスク削除 | `scripts/タスク完了.js` / `scripts/タスク削除.js` | タスクの後処理 |
| プロジェクト作成 | `scripts/プロジェクト作成.js` | プロジェクト新規作成 |
| サブタスク追加 | `scripts/サブタスク追加.js` | プロジェクトファイル内ボタン「➕ サブタスク追加」 |
| サブタスク展開 / 進捗更新 | `scripts/サブタスク展開.js` / `scripts/進捗更新.js` | プロジェクト進行管理 |

## 2. （参考）手動でのChoice追加手順
プリセットが適用できない環境向けに、従来の手動手順も残してあります。

### スクリプトの配置
スクリプトは `.obsidian/scripts/` または `QuickAdd Macros/` に配置済みです（詳細は上表を参照）。

### 代表例: 「タスク追加」Choice
1. QuickAdd設定 → 「Add Choice」
2. Name を「タスク追加」、Type を「Macro」に設定
3. Macroで「User Script」を選択し、`scripts/タスク追加.js` を指定
4. 「Command」トグルをONにして保存

同様に、必要なChoiceを追加します（Choice名は表の通り）。

## 3. 使用方法
- `Ctrl+P` → `QuickAdd: タスク追加 / タスク移動 / …` を実行
- ボタンやダッシュボードからも同名コマンドを呼び出す

## 4. 動作確認
1. 「QuickAdd: タスク追加」を実行してタスクを登録
2. 容量チェックの警告が表示されることを確認
3. スケジュールファイルに追記されていることを確認

## 5. トラブルシューティング
- スクリプトが見つからない → `scripts/` にファイルがあるか、パスが一致しているかを確認
- コマンドが表示されない → QuickAddでプリセットを再適用し、Obsidianを再起動
- エラー詳細を確認する場合 → `Ctrl+Shift+I` でコンソールを確認

