# ⏱️ Capacity-first Task Management

Capacity-first（旧Time Rulerルール）は、勤務時間の容量管理を軸にタスクを整理するためのシステムです。
Obsidianのプラグイン（QuickAdd, Dataview, Buttons, Tasks）を組み合わせて、タスクの登録・移動・容量チェック・プロジェクト管理を効率化します。

## 🚀 セットアップ手順

### 1. 必須プラグインのインストール
以下のコミュニティプラグインをインストールし、有効化してください。

1.  **QuickAdd**: タスク操作の自動化
    -   `設定 → QuickAdd` で **Enable API** を ON にしてください。
2.  **Dataview**: ダッシュボード表示
    -   `設定 → Dataview` で **Enable JavaScript Queries** と **Enable Inline JavaScript queries** を ON にしてください。
3.  **Buttons**: 操作ボタンの表示
4.  **Tasks**: タスク管理（オプションだが推奨）

### 2. スクリプトと設定の配置
1.  このフォルダ内の `scripts/` フォルダを確認します。
    -   全てのスクリプトは `scripts/` フォルダ内に配置されています。
2.  `scripts/config.js` を開き、`BASE_PATH` が `""` (空文字) になっていることを確認してください（このフォルダをVaultとして開いている場合）。

### 3. QuickAddプリセットの適用
1.  **Obsidianを完全に終了**します。
2.  `config/quickadd_preset.json` をコピーします。
3.  `.obsidian/plugins/quickadd/data.json` に上書き保存します（既存のファイルはバックアップ推奨）。
    > [!WARNING] 注意
    > 既にQuickAddを使用している場合、この操作で**既存の設定が全て上書きされます**。既存設定を残したい場合は上書きせず、手動で設定を追加してください。
4.  Obsidianを起動し、`Ctrl+P` → `QuickAdd: タスク追加` が表示されれば成功です。

---

## 📖 機能と使い方

### 📊 ダッシュボード
`タスク管理ダッシュボード.md` を開くと、今日のタスク、容量使用状況、今週のサマリーなどが表示されます。
ダッシュボード上のボタンから各機能を呼び出せます。

### ✅ タスク管理
-   **タスク追加**: `Ctrl+P` → `QuickAdd: タスク追加`
    -   タスク名、所要時間、ジャンルを入力してスケジュールに追加します。
    -   容量オーバー時は警告が出ます。
-   **タスク移動**: `Ctrl+P` → `QuickAdd: タスク移動`
    -   未完了タスクを次の出勤日に移動します。
-   **タスク完了/削除**: `QuickAdd: タスク完了` / `QuickAdd: タスク削除`

### 🔁 繰り返しタスク
定期的なタスクを自動展開します。
1.  `繰り返しタスク/` フォルダ内の `毎日.md`, `毎週.md`, `毎月.md` にタスクを定義します。
    -   フォーマット: `- [ ] タスク名 #ジャンル ⏱️ 60 🔁 every day`
2.  `QuickAdd: 繰り返しタスク展開` を実行すると、スケジュールに展開されます。

### 📁 プロジェクト管理
1.  **作成**: `QuickAdd: プロジェクト作成` でプロジェクトファイルを作成。
2.  **サブタスク**: プロジェクトファイル内でサブタスクを定義し、`QuickAdd: サブタスク展開` で日次スケジュールに割り振り。
3.  **進捗**: `QuickAdd: 進捗更新` で進捗率を自動計算。

### ⚖️ 容量チェック
スケジュールファイル内の「容量チェック」ボタン、または `QuickAdd: 容量チェック` で、その日のタスク容量とジャンル比率を確認できます。

---

## 📂 フォルダ構成
-   `scripts/`: 全てのスクリプトファイル
-   `config/`: 設定ファイル（プリセットなど）
-   `スケジュール/`: 日次タスクファイル（YYYY-MM-DD.md）
-   `繰り返しタスク/`: 繰り返しタスクの定義ファイル
-   `プロジェクト/`: プロジェクトファイル
-   `タスクプール/`: 未定のタスク置き場

## ⚠️ 注意事項
-   **勤務時間**: スケジュール内の勤務時間は変更しないでください。
-   **タスクフォーマット**: `⏱️ 時間`（分）の記載が容量計算に必須です。



