# Phase 4: プロジェクト管理 設定手順

## 概要

Phase 4では、プロジェクト（最大1ヶ月の期間）を管理し、サブタスクを日次タスクに展開する機能を実装しました。

## 実装内容

### 1. プロジェクト作成スクリプト

- **ファイル**: `scripts/プロジェクト作成.js`
- **コマンド名**: 「QuickAdd: プロジェクト作成」
- **機能**: 
  - プロジェクト名、説明、期間を入力してプロジェクトファイルを作成
  - 期間は最大1ヶ月（警告あり）
  - プロジェクトファイルは自動で開く

### 2. サブタスク展開スクリプト

- **ファイル**: `scripts/サブタスク展開.js`
- **コマンド名**: 「QuickAdd: サブタスク展開」
- **機能**: 
  - プロジェクトのサブタスクを日次タスクに展開
  - 出勤日のみに展開
  - 容量チェックを実行
  - 日付指定のタスクは指定日付に、未指定のタスクは開始日から順に割り当て

### 3. 進捗更新スクリプト

- **ファイル**: `scripts/進捗更新.js`
- **コマンド名**: 「QuickAdd: 進捗更新」
- **機能**: 
  - プロジェクトの完了率を自動計算
  - 進捗セクションを自動更新

### 4. プロジェクトテンプレート

- **ファイル**: `プロジェクト/プロジェクトテンプレート.md`
- **用途**: プロジェクトファイル作成時のテンプレート

## プロジェクトファイル構造

### ファイル名
`プロジェクト名.md`

### ファイル内容の構造

```markdown
# プロジェクト名

## 概要
プロジェクトの説明

## 期間
- 開始: YYYY-MM-DD
- 終了: YYYY-MM-DD（最大1ヶ月）

## 進捗
- [ ] 0%完了

## サブタスク（1階層まで）

### サブタスク1
- [ ] タスク1 #ジャンル ⏱️ 60 📅 YYYY-MM-DD
- [ ] タスク2 #ジャンル ⏱️ 60 📅 YYYY-MM-DD

### サブタスク2
- [ ] タスク3 #ジャンル ⏱️ 60 📅 YYYY-MM-DD

## メモ
<!-- プロジェクトに関するメモや注意事項を記入 -->
```

## 使い方

### 1. プロジェクトを作成

1. コマンドパレット（`Ctrl+P`）を開く
2. 「QuickAdd: プロジェクト作成」を選択
3. プロジェクト名、説明、開始日、終了日を入力
4. プロジェクトファイルが作成され、自動で開きます

### 2. サブタスクを追加

プロジェクトファイルを開いて、サブタスクセクションにタスクを追加します：

```markdown
## サブタスク（1階層まで）

### サブタスク1
- [ ] タスク1 #デスクワーク ⏱️ 60 📅 2025-01-15
- [ ] タスク2 #デスクワーク ⏱️ 90 📅 2025-01-20
```

**タスクフォーマット**:
- `- [ ] タスク名 #ジャンル ⏱️ 時間 📅 YYYY-MM-DD`
- 日付（📅）は省略可能（省略した場合は開始日から順に割り当て）

### 3. サブタスクを展開

1. コマンドパレット（`Ctrl+P`）を開く
2. 「QuickAdd: サブタスク展開」を選択
3. プロジェクトを選択
4. サブタスクが日次タスクに展開されます

### 4. 進捗を更新

1. コマンドパレット（`Ctrl+P`）を開く
2. 「QuickAdd: 進捗更新」を選択
3. プロジェクトを選択
4. 進捗率が自動計算されて更新されます

## 動作仕様

### サブタスク展開

1. **日付指定のタスク**: 指定された日付（出勤日の場合）に展開
2. **日付未指定のタスク**: 開始日から順に割り当て（出勤日のみ）
3. **容量チェック**: 各日の容量（300分）をチェックし、超過の場合は次の出勤日に割り当て
4. **重複チェック**: 既に同じタスクが存在する場合はスキップ

### 進捗計算

- 完了タスク数 ÷ 全タスク数 × 100
- 進捗セクションに自動更新
- 100%完了の場合はチェックボックスも自動でチェック

## 注意事項

1. **期間**: プロジェクトの期間は最大1ヶ月（超過時は警告あり）

2. **サブタスク階層**: 1階層まで（サブタスク内のサブタスクは不可）

3. **タスクフォーマット**: サブタスクのタスクは以下のフォーマットに従ってください:
   - `- [ ] タスク名 #ジャンル ⏱️ 時間 📅 YYYY-MM-DD`

4. **出勤日**: サブタスクは出勤日のみに展開されます（スケジュールファイルに「勤務」や「出勤」を含むタスクがある日）

## トラブルシューティング

### サブタスクが展開されない

1. プロジェクトファイルの期間が正しく設定されているか確認
2. サブタスクセクションのフォーマットが正しいか確認
3. 出勤日が正しく設定されているか確認

### 進捗が更新されない

1. プロジェクトファイルにタスクが追加されているか確認
2. タスクフォーマットが正しいか確認（`- [ ]` または `- [x]`）

### エラーが出る

- コンソール（`Ctrl+Shift+I`）でエラーメッセージを確認
- ファイルパスが正しいか確認
- プロジェクトファイルの構造が正しいか確認

## 今後の改善予定

- [ ] プロジェクト一覧表示機能
- [ ] マイルストーン管理機能
- [ ] プロジェクト間の依存関係管理
- [ ] 自動進捗更新（タスク完了時に自動更新）

